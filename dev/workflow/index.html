<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User Guide Â· IndividualDisplacements</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">IndividualDisplacements</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>User Guide</a><ul class="internal"><li><a class="tocitem" href="#Scope-/-Goals"><span>Scope / Goals</span></a></li><li><a class="tocitem" href="#Typical-Workflow"><span>Typical Workflow</span></a></li><li><a class="tocitem" href="#Core-Functions"><span>Core Functions</span></a></li><li><a class="tocitem" href="#Data-Structures"><span>Data Structures</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Example Guide</a></li><li><span class="tocitem">Tutorial Examples</span><ul><li><a class="tocitem" href="../basics/solid_body_rotation/">Single Particle</a></li><li><a class="tocitem" href="../basics/random_flow_field/">Particle Set</a></li></ul></li><li><span class="tocitem">Real Ocean Cases</span><ul><li><a class="tocitem" href="../worldwide/global_ocean_circulation/">Global Climatology</a></li><li><a class="tocitem" href="../worldwide/three_dimensional_ocean/">Three Dimensions</a></li></ul></li><li><span class="tocitem">MITgcm Examples</span><ul><li><a class="tocitem" href="../basics/detailed_look/">Detailed Look</a></li><li><a class="tocitem" href="../basics/particle_cloud/">Particle Cloud</a></li></ul></li><li><a class="tocitem" href="../API/">Tool Box</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>User Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>User Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/master/docs/src/workflow.md" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Scope-/-Goals"><a class="docs-heading-anchor" href="#Scope-/-Goals">Scope / Goals</a><a id="Scope-/-Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Scope-/-Goals" title="Permalink"></a></h2><p>A central goal of this package is to support scientific analysis of climate model output and observed drifts of e.g. plastics in the Ocean or chemical coumponds in the Atmosphere. To start, the package supports all types of gridded model output <a href="https://mitgcm.readthedocs.io/en/latest/?badge=latest">MIT General Circulation Model</a> by exploiting the <a href="https://github.com/JuliaClimate/MeshArrays.jl">MeshArrays.jl</a> package (<a href="https://juliaclimate.github.io/MeshArrays.jl/dev/">docs found here</a>). The tool box in this package also provides functions to ingest trajectory data which have been collected by the <a href="https://doi.org/10.1002/2016JC011716">Ocean Drifting Buoy</a> Program over the real Ocean (<a href="https://youtu.be/82HPnYBtoVo">movie</a>) or computed by MITgcm.</p><h2 id="Typical-Workflow"><a class="docs-heading-anchor" href="#Typical-Workflow">Typical Workflow</a><a id="Typical-Workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Typical-Workflow" title="Permalink"></a></h2><p>As documented in the <strong>examples</strong>, the typical worflow is:</p><ol><li>set up <code>FlowFields</code></li><li>set up <code>Individuals</code></li><li>displace them (<code>âˆ«!</code>, ğŸš„, ğŸ“Œ)</li><li>record and post-process (ğŸ”´, ğŸ”§)</li><li>go back to <code>2</code> and continue </li></ol><p>Steps <code>1</code> and <code>2</code> are done via constructors documented below in the <code>Data Structures</code> section.  Step <code>3</code> and step <code>4</code> typically take place within the call to <code>âˆ«!</code>. The latter can indeed readily post-process results recorded in ğŸ”´ when <code>âˆ«!</code> calls ğŸ”§ before updating positions ğŸ“Œ. Since ğŸ”´ is in the <a href="https://juliadata.github.io/DataFrames.jl/latest/">DataFrames</a> tabular format, it is easily manipulated or plotted after the fact (step <code>4</code> per se). Step <code>5</code> is optional. </p><p><strong>See the examples</strong> for more documentation regarding the ingestion of time varying flow fields, three-dimensional ocean trajectory simulations, process oriented configurations, as well as plotting and data formats. </p><h2 id="Core-Functions"><a class="docs-heading-anchor" href="#Core-Functions">Core Functions</a><a id="Core-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Functions" title="Permalink"></a></h2><p>The velocity interpolation funtions (ğŸš„ used in step <code>3</code>; documented in the <code>Tool Box</code> section) interpolate flow fields to positions ğŸ“Œ, and <code>âˆ«!</code> integrates the result forward in time. </p><p><code>âˆ«!(ğ¼,ğ‘‡)</code> displaces individuals ğ¼ continuously over time period ğ‘‡ according to velocity function ğŸš„, temporal integration method âˆ«, and post-processor ğŸ”§ (all embedded within ğ¼).</p><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.âˆ«!" href="#IndividualDisplacements.âˆ«!"><code>IndividualDisplacements.âˆ«!</code></a> â€” <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">âˆ«!(ğ¼::Individuals,ğ‘‡::Tuple)</code></pre><p>Displace simulated individuals continuously through space over time period ğ‘‡ starting from position ğŸ“Œ. </p><ul><li>This is typically achieved by computing the cumulative integral of velocity experienced by each individual along its trajectory (âˆ« ğŸš„ dt).</li><li>The current default is <code>solve(prob,Tsit5(),reltol=1e-8,abstol=1e-8)</code> but all solver options from the <a href="https://github.com/SciML/OrdinaryDiffEq.jl">OrdinaryDiffEq.jl</a> package are available.</li><li>After this, <code>âˆ«!</code> is also equiped to postprocess results recorded into ğŸ”´ via the ğŸ”§ workflow, and the last step in <code>âˆ«!</code> consiste in updating ğŸ“Œ to be ready for continuing in a subsequent call to <code>âˆ«!</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L231-L239">source</a></section><section><div><pre><code class="language-none">âˆ«!(ğ¼::Individuals)</code></pre><p>Call âˆ«!(ğ¼::Individuals,ğ¼.ğ‘ƒ.ğ‘‡)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L256-L260">source</a></section></article><h2 id="Data-Structures"><a class="docs-heading-anchor" href="#Data-Structures">Data Structures</a><a id="Data-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Structures" title="Permalink"></a></h2><p>The <code>Individuals</code> struct contains a <code>FlowFields</code> struct (incl. e.g. arrays), initial positions for the individuals, and the other elements (see below) involved in <code>âˆ«!(ğ¼,ğ‘‡)</code>.</p><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.FlowFields" href="#IndividualDisplacements.FlowFields"><code>IndividualDisplacements.FlowFields</code></a> â€” <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">abstract type FlowFields</code></pre><p>Data structure that provide access to flow fields (on grids, arrays) which will be  used to interpolate velocities to individual locations later on (once embedded in an <code>Individuals</code> struct).</p><p>Supported array types / constructors: </p><ul><li>ğ¹_Array2D (u0,v0,u1,v1,ğ‘‡)</li><li>ğ¹_Array3D (u0,v0,w0,u1,v1,w1,ğ‘‡)</li><li>ğ¹_MeshArray2D (u0,v0,u1,v1,ğ‘‡,update__location!)</li><li>ğ¹_MeshArray3D (u0,v0,w0,u1,v1,w1,ğ‘‡,update__location!)</li></ul><p>See the documentation examples for more.</p><pre><code class="language-none">ğ¹=ğ¹_Array3D{eltype(u)}(u,u,v,v,0*w,1*w,[0.0,10.0])
or
ğ¹=ğ¹_MeshArray2D{eltype(u)}(u,u,v,v,[0.0,10.0],func)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L4-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals" href="#IndividualDisplacements.Individuals"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct Individuals{T}</code></pre><ul><li>Data:           ğŸ“Œ (position),   ğŸ”´(record), ğŸ†” (ID), ğ‘ƒ (<code>FlowFields</code>)</li><li>Functions:      ğŸš„ (velocity),   âˆ« (integration), ğŸ”§(postprocessing)</li><li>NamedTuples:    ğ· (diagnostics),      ğ‘€ (metadata)</li></ul><p>The velocity function ğŸš„ typically computes velocity at an arbitrary position within the  chosen space-time domain (ğŸ“Œ to start) by interpolating gridded variables obtained from ğ‘ƒ.</p><p>Default keyword constructor example:</p><pre><code class="language-none">df=DataFrame( ID=[], x=[], y=[], z=[], t = [])
ğ¼=Individuals{Float64,2}(ğŸ“Œ=zeros(3,10),ğŸ†”=1:10,ğŸ”´=deepcopy(df))
ğ¼=Individuals(ğŸ“Œ=zeros(3,2),ğŸ†”=collect(1:2),ğŸ”´=deepcopy(df))</code></pre><p>Plain text (or no-unicode) constructor example:</p><pre><code class="language-none">df=DataFrame( ID=[], x=[], y=[], z=[], t = [])
I=(position=zeros(3,2),ID=1:2,record=deepcopy(df))
I=Individuals(I)</code></pre><p>Keyword cheatsheet:</p><ul><li>ğŸ“Œ=<code>\:pushpin:&lt;tab&gt;</code>,          ğŸ”´=<code>\:red_circle:&lt;tab&gt;</code>, ğŸ†”=<code>\:id:&lt;tab&gt;</code></li><li>ğŸš„=<code>\:bullettrain_side:&lt;tab&gt;</code>, âˆ«=<code>\int&lt;tab&gt;</code>,          ğŸ”§=<code>\wrench&lt;tab&gt;</code></li><li>ğ‘ƒ=<code>\itP&lt;tab&gt;</code>,                 ğ·=<code>\itD&lt;tab&gt;</code>,           ğ‘€=<code>\itM&lt;tab&gt;</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaLang/julia/blob/788b2c77c10c2160f4794a4d4b6b81a95a90940c/base/#L0-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals-Tuple{NamedTuple}" href="#IndividualDisplacements.Individuals-Tuple{NamedTuple}"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Individuals(NT::NamedTuple)</code></pre><p>Constructor that uses a NamedTuple with only plain text keywords (i.e. no-unicode needed).</p><pre><code class="language-none">df=DataFrame( ID=[], x=[], y=[], z=[], t = [])
I=(position=zeros(3,2),ID=1:2,record=deepcopy(df))
I=Individuals(I)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L126-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals-Tuple{ğ¹_Array2D,Any,Any}" href="#IndividualDisplacements.Individuals-Tuple{ğ¹_Array2D,Any,Any}"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Individuals(ğ¹::ğ¹_Array2D,x,y)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L154-L157">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals-Tuple{ğ¹_Array3D,Any,Any,Any}" href="#IndividualDisplacements.Individuals-Tuple{ğ¹_Array3D,Any,Any,Any}"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Individuals(ğ¹::ğ¹_Array3D,x,y,z)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L170-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals-Tuple{ğ¹_MeshArray2D,Any,Any,Any}" href="#IndividualDisplacements.Individuals-Tuple{ğ¹_MeshArray2D,Any,Any,Any}"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Individuals(ğ¹::ğ¹_MeshArray2D,x,y,fid)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L191-L194">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IndividualDisplacements.Individuals-Tuple{ğ¹_MeshArray3D,Any,Any,Any}" href="#IndividualDisplacements.Individuals-Tuple{ğ¹_MeshArray3D,Any,Any,Any}"><code>IndividualDisplacements.Individuals</code></a> â€” <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Individuals(ğ¹::ğ¹_MeshArray3D,x,y,z,fid)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/0cb25c8c19fb4f063fcc7a67402b0685c12c7985/src/API.jl#L208-L211">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">Â« Introduction</a><a class="docs-footer-nextpage" href="../examples/">Example Guide Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 22 December 2020 06:51">Tuesday 22 December 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
