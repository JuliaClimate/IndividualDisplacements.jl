<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example Guide ¬∑ IndividualDisplacements</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">IndividualDisplacements</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../workflow/">User Guide</a></li><li class="is-active"><a class="tocitem" href>Example Guide</a><ul class="internal"><li><a class="tocitem" href="#Summary"><span>Summary</span></a></li><li><a class="tocitem" href="#Single-Particle-Example"><span>Single Particle Example</span></a></li><li><a class="tocitem" href="#Particle-Set-Example"><span>Particle Set Example</span></a></li><li><a class="tocitem" href="#Global-Ocean-Circulation"><span>Global Ocean Circulation</span></a></li><li><a class="tocitem" href="#Three-Dimensional-Paths"><span>Three Dimensional Paths</span></a></li><li><a class="tocitem" href="#Running-The-Examples"><span>Running The Examples</span></a></li><li><a class="tocitem" href="#Tool-Box,-Etc."><span>Tool Box, Etc.</span></a></li></ul></li><li><span class="tocitem">Tutorial Examples</span><ul><li><a class="tocitem" href="../basics/random_flow_field/">Particle Set</a></li><li><a class="tocitem" href="../basics/solid_body_rotation/">Single Particle</a></li></ul></li><li><span class="tocitem">Real Ocean Cases</span><ul><li><a class="tocitem" href="../worldwide/global_ocean_circulation/">Global Climatology</a></li><li><a class="tocitem" href="../worldwide/three_dimensional_ocean/">Three Dimensions</a></li></ul></li><li><span class="tocitem">MITgcm Examples</span><ul><li><a class="tocitem" href="../basics/detailed_look/">Detailed Look</a></li><li><a class="tocitem" href="../basics/particle_cloud/">Particle Cloud</a></li></ul></li><li><a class="tocitem" href="../API/">Tool Box</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Example Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaClimate/IndividualDisplacements.jl/blob/master/docs/src/examples.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h2><p>The four examples outlined below form a tutorial, and thus complement the rest of the package documentation. Afterwards, we provide a listing of other examples, plotting recipes, and tools included in the package. </p><p>A user seeking to configure <code>IndividualDisplacements.jl</code> for a new problem might also find, hopefully useful, examples of data wrangling codes in <code>helper_functions.jl</code>. They define grids and ingest velocity fields for the examples below. </p><p>Output is in <a href="https://juliadata.github.io/DataFrames.jl/latest/">DataFrames</a> tabular format which readily provides powerful and convenient analysis methods. Plotting trajectories in space and time, for example, can be done as in <code>recipes_plots.jl</code>, <code>recipes_makie.jl</code>, and <code>recipes_pyplot.jl</code> (see examples).</p><h2 id="Single-Particle-Example"><a class="docs-heading-anchor" href="#Single-Particle-Example">Single Particle Example</a><a id="Single-Particle-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Single-Particle-Example" title="Permalink"></a></h2><p>Here we start with a three-dimensional flow field <code>u,v,w</code>, initialize a single particle / individual position <code>üìå</code>, and wrap everything up within a custom data structure <code>ùêº</code>.</p><p>The individual(s) in <code>ùêº</code> is then displaced by integrating its instantaneous velocity, <a href="https://en.wikipedia.org/wiki/Lagrangian_and_Eulerian_specification_of_the_flow_field">moving along through space</a>, over time <code>ùëá</code>.  This is generally the main computation done in this package ‚Äì interpolating <code>u,v,w</code> to individual positions <code>ùêº.üìå</code> on the fly, using <code>ùêº.üöÑ</code>, and integrating through time, using <code>ùêº.‚à´</code>.</p><p>The flow field consists of <a href="https://en.wikipedia.org/wiki/Rigid_body">rigid body rotation</a>, plus a convergent term, plus a sinking term in the third direction. This generates a downward, converging spiral ‚Äì a idealized version of a relevant case in the Ocean.</p><p><img src="https://github.com/JuliaClimate/IndividualDisplacements.jl/raw/master/examples/figs/SolidBodyRotation.gif" alt="SolidBodyRotation"/></p><h2 id="Particle-Set-Example"><a class="docs-heading-anchor" href="#Particle-Set-Example">Particle Set Example</a><a id="Particle-Set-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Particle-Set-Example" title="Permalink"></a></h2><p>Here we illustrate (1) the simulation of an ensemble of particles and (2) how one simply goes from a velocity array to solving for trajectories using <code>IndividualDisplacements.jl</code>. </p><p>The included convenience function (<code>convert_to_FlowFields</code>) defines a unit grid based on the velocity array size, adds a time range, and returns a <code>FlowFields</code> data structure <code>ùêπ</code>. All that is left to do at this stage is to define initial conditions, put them together with <code>ùêπ</code> within the <code>Individuals</code> data structure <code>ùêº</code>, and call <code>‚à´!(ùêº)</code>.</p><p>The prototype for this example is based on a randomly generated flow field in a doubly periodic gridded domain. Exercises include the non-periodic domain case, statistics made easy via <code>DataFrames.jl</code>, and replacing the flow field with your own.</p><p><img src="https://github.com/JuliaClimate/IndividualDisplacements.jl/raw/master/examples/figs/RandomFlow.gif" alt="RandomFlow"/></p><h2 id="Global-Ocean-Circulation"><a class="docs-heading-anchor" href="#Global-Ocean-Circulation">Global Ocean Circulation</a><a id="Global-Ocean-Circulation-1"></a><a class="docs-heading-anchor-permalink" href="#Global-Ocean-Circulation" title="Permalink"></a></h2><p>A simulation of floating particles over the Global Ocean which illustrates (1) using time variable velocity fields, (2) global connections, (3) particle re-seeding, and (4) output statistics. </p><p>The flow field is based on a data-constrained, realistic, ocean model. The problem is configured in a way to mimic, albeit very crudely, the near-surface tranport of plastics or planktons.</p><p><a href="https://youtu.be/W5DNqJG9jt0"><img src="https://user-images.githubusercontent.com/20276764/84766999-b801ad80-af9f-11ea-922a-610ad8a257dc.png" alt="simulated particle movie (5m)"/></a></p><h2 id="Three-Dimensional-Paths"><a class="docs-heading-anchor" href="#Three-Dimensional-Paths">Three Dimensional Paths</a><a id="Three-Dimensional-Paths-1"></a><a class="docs-heading-anchor-permalink" href="#Three-Dimensional-Paths" title="Permalink"></a></h2><p>A simulation of particles that follow the three-dimensional ocean circulation. This example illustrates (1) the 3D case in a relatistic configuration, (2) tracking the advent or origin of a water patch, and (3) multifacted visualizations in 3D.</p><p>The flow field is based on a data-constrained, realistic, ocean model. The problem configuration mimics, albeit very approximately, ocean tracers / coumpounds transported by water masses .</p><p><a href="https://youtu.be/twAAE_WUs_g"><img src="https://user-images.githubusercontent.com/20276764/94491485-595ee900-01b6-11eb-95e6-c2cacb812f46.png" alt="simulated particle movie (3D)"/></a></p><h2 id="Running-The-Examples"><a class="docs-heading-anchor" href="#Running-The-Examples">Running The Examples</a><a id="Running-The-Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Running-The-Examples" title="Permalink"></a></h2><p>Running the examples requires <code>julia</code> and its relevant packages. Inputs get downloaded as needed upon running the examples. The first three steps below do this, and generate jupyter notebook versions of the examples (easy to rerun afterwards). Once everything is setup then user can just call examples directly in <code>julia</code> (i.e., skip to last step below).</p><h4 id=".-Download-the-examples-folder:"><a class="docs-heading-anchor" href="#.-Download-the-examples-folder:">1. Download the examples folder:</a><a id=".-Download-the-examples-folder:-1"></a><a class="docs-heading-anchor-permalink" href="#.-Download-the-examples-folder:" title="Permalink"></a></h4><pre><code class="language-none">git clone https://github.com/JuliaClimate/IndividualDisplacements.jl
julia --project=IndividualDisplacements.jl/docs/</code></pre><h4 id=".-Get-all-needed-packages-and-IndividualDisplacements.jl:"><a class="docs-heading-anchor" href="#.-Get-all-needed-packages-and-IndividualDisplacements.jl:">2. Get all needed packages and <code>IndividualDisplacements.jl</code>:</a><a id=".-Get-all-needed-packages-and-IndividualDisplacements.jl:-1"></a><a class="docs-heading-anchor-permalink" href="#.-Get-all-needed-packages-and-IndividualDisplacements.jl:" title="Permalink"></a></h4><pre><code class="language-none">using Pkg
Pkg.activate(&quot;IndividualDisplacements.jl/docs/&quot;)
Pkg.instantiate()
Pkg.add(&quot;IndividualDisplacements&quot;)</code></pre><h4 id=".-Generate-jupyter-notebook-using-Literate.jl:"><a class="docs-heading-anchor" href="#.-Generate-jupyter-notebook-using-Literate.jl:">3. Generate jupyter notebook using <code>Literate.jl</code>:</a><a id=".-Generate-jupyter-notebook-using-Literate.jl:-1"></a><a class="docs-heading-anchor-permalink" href="#.-Generate-jupyter-notebook-using-Literate.jl:" title="Permalink"></a></h4><pre><code class="language-none">using Literate
Literate.notebook(&quot;IndividualDisplacements.jl/examples/basics/solid_body_rotation.jl&quot;, &quot;.&quot;, execute = true, documenter = false)
Literate.notebook(&quot;IndividualDisplacements.jl/examples/worldwide/three_dimensional_ocean.jl&quot;, &quot;.&quot;, execute = true, documenter = false)</code></pre><p>And so on and so forth ‚Äì see documentation for a list of examples.</p><h4 id=".-or-alternatively,-in-the-julia-REPL:"><a class="docs-heading-anchor" href="#.-or-alternatively,-in-the-julia-REPL:">4. or alternatively, in the julia REPL:</a><a id=".-or-alternatively,-in-the-julia-REPL:-1"></a><a class="docs-heading-anchor-permalink" href="#.-or-alternatively,-in-the-julia-REPL:" title="Permalink"></a></h4><pre><code class="language-none">using IndividualDisplacements
p=dirname(pathof(IndividualDisplacements))
include(p*&quot;/../examples/worldwide/global_ocean_circulation.jl&quot;)</code></pre><h2 id="Tool-Box,-Etc."><a class="docs-heading-anchor" href="#Tool-Box,-Etc.">Tool Box, Etc.</a><a id="Tool-Box,-Etc.-1"></a><a class="docs-heading-anchor-permalink" href="#Tool-Box,-Etc." title="Permalink"></a></h2><ul><li>Tools included in <code>src/compute.jl</code> and <code>data_wrangling.jl</code>:</li></ul><pre><code class="language-none">- Velocity interpolaton functions for several array / grid types.
- Preprocessing and postprocessing methods.
- I/O routines to read / write results from / to file.</code></pre><ul><li><p>Examples reproducing trajectories that had been computed earlier in Fortran (<a href="https://mitgcm.readthedocs.io/en/latest/outp_pkgs/outp_pkgs.html#">MITgcm/pkg/flt</a>) are <code>detailed_look.jl</code> and <code>particle_cloud.jl</code>. </p></li><li><p>For more see also: <code>example_CyclicArray.jl</code>, <code>example123.jl</code>, <code>helper_functions.jl</code>; and for plotting : <code>recipes_plots.jl</code>, <code>recipes_makie.jl</code>, <code>recipes_pyplot.jl</code> also in the <code>examples/</code> folder.</p></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../workflow/">¬´ User Guide</a><a class="docs-footer-nextpage" href="../basics/random_flow_field/">Particle Set ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 26 January 2021 15:00">Tuesday 26 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
